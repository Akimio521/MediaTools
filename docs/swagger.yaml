definitions:
  config.CustomWordConfig:
    properties:
      customization:
        description: 自定义占位置词
        items:
          type: string
        type: array
      exclude_words:
        description: 自定义排除词
        items:
          type: string
        type: array
      identify_word:
        description: 自定义识别词
        items:
          type: string
        type: array
    type: object
  config.FanartConfig:
    properties:
      api_key:
        type: string
      api_url:
        type: string
      languages:
        description: 语言顺序
        items:
          type: string
        type: array
    type: object
  config.FormatConfig:
    properties:
      movie:
        description: 电影格式
        type: string
      tv:
        description: 电视剧格式
        type: string
    type: object
  config.LibraryConfig:
    properties:
      dst_path:
        description: 目标路径
        type: string
      dst_type:
        allOf:
        - $ref: '#/definitions/schemas.StorageType'
        description: 目标类型
      name:
        description: 媒体库名称
        type: string
      organize_by_category:
        description: 是否按分类分文件夹
        type: boolean
      organize_by_type:
        description: 是否按类型分文件夹
        type: boolean
      src_path:
        description: 源路径
        type: string
      src_type:
        allOf:
        - $ref: '#/definitions/schemas.StorageType'
        description: 源类型
      transfer_type:
        allOf:
        - $ref: '#/definitions/schemas.TransferType'
        description: 传输类型
    type: object
  config.LogConfig:
    properties:
      console_level:
        description: 终端输出日志级别
        type: string
      file_dir:
        description: 日志文件目录
        type: string
      file_level:
        description: 文件日志级别
        type: string
    type: object
  config.TMDBConfig:
    properties:
      api_key:
        description: API Key
        type: string
      api_url:
        description: TMDB API URL
        type: string
      image_url:
        description: 图片 API URL
        type: string
      include_image_language:
        description: 包含的图片语言
        type: string
      language:
        description: 语言
        type: string
    type: object
  encode.AudioEncode:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    - 11
    - 12
    - 13
    format: int32
    type: integer
    x-enum-comments:
      AudioEncodeAAC: AAC
      AudioEncodeAC3: AC-3
      AudioEncodeAtmos: Dolby Atmos
      AudioEncodeDTS: DTS
      AudioEncodeDTSHD: DTS-HD
      AudioEncodeDTSHDMA: DTS-HD MA
      AudioEncodeEAC3: E-AC-3/DD+
      AudioEncodeFLAC: FLAC
      AudioEncodeLPCM: LPCM
      AudioEncodeMP3: MP3
      AudioEncodeOpus: Opus
      AudioEncodeTrueHD: TrueHD
      AudioEncodeUnknown: 未知编码
      AudioEncodeVorbis: Vorbis
    x-enum-descriptions:
    - 未知编码
    - AAC
    - AC-3
    - E-AC-3/DD+
    - DTS
    - DTS-HD
    - DTS-HD MA
    - TrueHD
    - Dolby Atmos
    - FLAC
    - LPCM
    - Opus
    - Vorbis
    - MP3
    x-enum-varnames:
    - AudioEncodeUnknown
    - AudioEncodeAAC
    - AudioEncodeAC3
    - AudioEncodeEAC3
    - AudioEncodeDTS
    - AudioEncodeDTSHD
    - AudioEncodeDTSHDMA
    - AudioEncodeTrueHD
    - AudioEncodeAtmos
    - AudioEncodeFLAC
    - AudioEncodeLPCM
    - AudioEncodeOpus
    - AudioEncodeVorbis
    - AudioEncodeMP3
  encode.VideoEncode:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    - 11
    - 12
    - 13
    - 14
    format: int32
    type: integer
    x-enum-comments:
      VideoEncode10bit: 纯10bit编码（未指定具体编码格式）
      VideoEncodeAV1: AV1
      VideoEncodeAV1_10bit: AV1 10bit
      VideoEncodeAVS2: AVS2
      VideoEncodeAVS3: AVS3
      VideoEncodeDivX: DivX
      VideoEncodeH264: H.264/AVC
      VideoEncodeH264_10bit: H.264 10bit
      VideoEncodeH265: H.265/HEVC
      VideoEncodeH265_10bit: H.265 10bit
      VideoEncodeMPEG2: MPEG-2
      VideoEncodeMPEG4: MPEG-4
      VideoEncodeUnknown: 未知编码
      VideoEncodeVC1: VC-1
      VideoEncodeXvid: Xvid
    x-enum-descriptions:
    - 未知编码
    - H.264/AVC
    - H.265/HEVC
    - H.264 10bit
    - H.265 10bit
    - AV1
    - AV1 10bit
    - Xvid
    - DivX
    - MPEG-2
    - MPEG-4
    - VC-1
    - AVS2
    - AVS3
    - 纯10bit编码（未指定具体编码格式）
    x-enum-varnames:
    - VideoEncodeUnknown
    - VideoEncodeH264
    - VideoEncodeH265
    - VideoEncodeH264_10bit
    - VideoEncodeH265_10bit
    - VideoEncodeAV1
    - VideoEncodeAV1_10bit
    - VideoEncodeXvid
    - VideoEncodeDivX
    - VideoEncodeMPEG2
    - VideoEncodeMPEG4
    - VideoEncodeVC1
    - VideoEncodeAVS2
    - VideoEncodeAVS3
    - VideoEncode10bit
  loghook.LogDetail:
    properties:
      caller:
        description: 日志调用者
        type: string
      level:
        description: 日志级别
        type: string
      message:
        description: 日志消息
        type: string
      time:
        description: 日志时间
        type: string
    type: object
  meta.MediaType:
    enum:
    - 0
    - 1
    - 2
    format: int32
    type: integer
    x-enum-comments:
      MediaTypeMovie: 电影
      MediaTypeTV: 电视剧
      MediaTypeUnknown: 未知
    x-enum-descriptions:
    - 未知
    - 电影
    - 电视剧
    x-enum-varnames:
    - MediaTypeUnknown
    - MediaTypeMovie
    - MediaTypeTV
  meta.ResourceEffect:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    - 11
    - 12
    format: int32
    type: integer
    x-enum-comments:
      ResourceEffect3D: 3D
      ResourceEffectDV: DV
      ResourceEffectDolby: Dolby
      ResourceEffectDovi: DOVI
      ResourceEffectEDR: EDR
      ResourceEffectHDR: HDR
      ResourceEffectHDR10: HDR10
      ResourceEffectHDR10Plus: HDR10+
      ResourceEffectHLG: HLG
      ResourceEffectHQ: HQ
      ResourceEffectRepack: REPACK
      ResourceEffectSDR: SDR
      ResourceEffectUnknown: 未知
    x-enum-descriptions:
    - 未知
    - SDR
    - HDR
    - HDR10
    - HDR10+
    - Dolby
    - DOVI
    - DV
    - 3D
    - REPACK
    - HLG
    - EDR
    - HQ
    x-enum-varnames:
    - ResourceEffectUnknown
    - ResourceEffectSDR
    - ResourceEffectHDR
    - ResourceEffectHDR10
    - ResourceEffectHDR10Plus
    - ResourceEffectDolby
    - ResourceEffectDovi
    - ResourceEffectDV
    - ResourceEffect3D
    - ResourceEffectRepack
    - ResourceEffectHLG
    - ResourceEffectEDR
    - ResourceEffectHQ
  meta.ResourcePix:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    format: int32
    type: integer
    x-enum-comments:
      ResourcePix480p: 480p
      ResourcePix720p: 720p
      ResourcePix1080p: 1080p
      ResourcePix1440p: 1440p (2K)
      ResourcePix2160p: 2160p (4K)
      ResourcePix4320p: 4320p (8K)
      ResourcePixUnknown: 未知分辨率
    x-enum-descriptions:
    - 未知分辨率
    - 480p
    - 720p
    - 1080p
    - 1440p (2K)
    - 2160p (4K)
    - 4320p (8K)
    x-enum-varnames:
    - ResourcePixUnknown
    - ResourcePix480p
    - ResourcePix720p
    - ResourcePix1080p
    - ResourcePix1440p
    - ResourcePix2160p
    - ResourcePix4320p
  meta.ResourceType:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    - 11
    - 12
    - 13
    - 14
    - 15
    - 16
    format: int32
    type: integer
    x-enum-comments:
      ResourceTypeBD: BD
      ResourceTypeBDRip: BDRip
      ResourceTypeBlu: Blu
      ResourceTypeBluRay: BluRay
      ResourceTypeBluRayRemux: BluRay REMUX
      ResourceTypeDVDRip: DVDRip
      ResourceTypeHDDVD: HDDVD
      ResourceTypeHDRip: HDRip
      ResourceTypeHDTV: HDTV
      ResourceTypeRemux: Remux
      ResourceTypeUHD: UHD
      ResourceTypeUHDBluRay: UHD BluRay
      ResourceTypeUHDTV: UHDTV
      ResourceTypeUnknown: 未知
      ResourceTypeWeb: Web
      ResourceTypeWebDL: WEB-DL
      ResourceTypeWebRip: WebRip
    x-enum-descriptions:
    - 未知
    - BluRay
    - HDTV
    - UHDTV
    - HDDVD
    - WebRip
    - DVDRip
    - BDRip
    - Blu
    - Web
    - BD
    - HDRip
    - Remux
    - UHD
    - WEB-DL
    - UHD BluRay
    - BluRay REMUX
    x-enum-varnames:
    - ResourceTypeUnknown
    - ResourceTypeBluRay
    - ResourceTypeHDTV
    - ResourceTypeUHDTV
    - ResourceTypeHDDVD
    - ResourceTypeWebRip
    - ResourceTypeDVDRip
    - ResourceTypeBDRip
    - ResourceTypeBlu
    - ResourceTypeWeb
    - ResourceTypeBD
    - ResourceTypeHDRip
    - ResourceTypeRemux
    - ResourceTypeUHD
    - ResourceTypeWebDL
    - ResourceTypeUHDBluRay
    - ResourceTypeBluRayRemux
  meta.StreamingPlatform:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
    format: int32
    type: integer
    x-enum-varnames:
    - UnknownStreamingPlatform
    - Amazon
    - Netflix
    - AppleTV
    - ITunes
    - Disney
    - Baha
    - BiliBili
    - BiliGlobal
    - Crunchyroll
    - YouTube
  schemas.ErrResponse:
    properties:
      message:
        type: string
      success:
        type: boolean
    type: object
  schemas.FileInfo:
    properties:
      ext:
        description: 文件扩展名
        type: string
      is_dir:
        description: 是否为目录
        type: boolean
      mod_time:
        description: 文件修改时间
        type: string
      name:
        description: 文件名
        type: string
      path:
        description: 文件路径
        type: string
      size:
        description: 文件大小
        type: integer
      storage_type:
        allOf:
        - $ref: '#/definitions/schemas.StorageType'
        description: 存储系统类型
    type: object
  schemas.FileInfoRequest:
    properties:
      path:
        type: string
      storage_type:
        $ref: '#/definitions/schemas.StorageType'
    required:
    - path
    - storage_type
    type: object
  schemas.LibraryArchiveMediaRequest:
    properties:
      dst_dir:
        $ref: '#/definitions/schemas.FileInfoRequest'
      need_scrape:
        type: boolean
      src_file:
        $ref: '#/definitions/schemas.FileInfoRequest'
      transfer_type:
        $ref: '#/definitions/schemas.TransferType'
    required:
    - dst_dir
    - src_file
    type: object
  schemas.MediaItem:
    properties:
      audio_encode:
        allOf:
        - $ref: '#/definitions/encode.AudioEncode'
        description: 音频编码
      customization:
        description: 自定义词
        items:
          type: string
        type: array
      episode:
        description: 集数 -1表示无集数
        type: integer
      episode_date:
        description: 集发布日期
        type: string
      episode_str:
        description: 集 E12 E12-E15
        type: string
      episode_title:
        description: 集标题
        type: string
      file_extension:
        description: 文件扩展名
        type: string
      imdb_id:
        description: IMDb ID
        type: string
      media_type:
        allOf:
        - $ref: '#/definitions/meta.MediaType'
        description: 电影、电视剧
      original_title:
        description: 原始标题
        type: string
      part:
        description: 分段
        type: string
      platform:
        allOf:
        - $ref: '#/definitions/meta.StreamingPlatform'
        description: 流媒体平台
      release_groups:
        description: 发布组
        items:
          type: string
        type: array
      resource_effect:
        description: 资源效果
        items:
          $ref: '#/definitions/meta.ResourceEffect'
        type: array
      resource_pix:
        allOf:
        - $ref: '#/definitions/meta.ResourcePix'
        description: 分辨率
      resource_type:
        allOf:
        - $ref: '#/definitions/meta.ResourceType'
        description: 资源相关信息
      season:
        description: 电视剧数据
        type: integer
      season_str:
        description: 季 S01 S01-S03
        type: string
      season_year:
        description: 季年份
        type: integer
      title:
        description: 标题
        type: string
      tmdb_id:
        description: ID 信息
        type: integer
      tvdb_id:
        description: TVDB ID
        type: integer
      version:
        description: 版本号
        type: integer
      video_encode:
        allOf:
        - $ref: '#/definitions/encode.VideoEncode'
        description: 视频编码
      year:
        description: 年份
        type: integer
    type: object
  schemas.RecognizationResponse:
    properties:
      custom_rule:
        description: 应用自定义规则
        type: string
      item:
        allOf:
        - $ref: '#/definitions/schemas.MediaItem'
        description: 识别到的媒体项
      meta_rule:
        description: 应用的媒体规则
        type: string
    type: object
  schemas.ScrapeRequest:
    properties:
      dst_file:
        $ref: '#/definitions/schemas.FileInfoRequest'
      media_type:
        $ref: '#/definitions/meta.MediaType'
      tmdb_id:
        type: integer
    required:
    - dst_file
    type: object
  schemas.StorageProviderItem:
    properties:
      storage_type:
        $ref: '#/definitions/schemas.StorageType'
      transfer_type:
        items:
          $ref: '#/definitions/schemas.TransferType'
        type: array
    type: object
  schemas.StorageType:
    enum:
    - 0
    - 1
    format: int32
    type: integer
    x-enum-comments:
      StorageLocal: 本地文件系统
      StorageUnknown: 未知文件系统
    x-enum-descriptions:
    - 未知文件系统
    - 本地文件系统
    x-enum-varnames:
    - StorageUnknown
    - StorageLocal
  schemas.TransferType:
    enum:
    - 0
    - 1
    - 2
    - 3
    - 4
    format: int32
    type: integer
    x-enum-comments:
      TransferCopy: 复制
      TransferLink: 硬链接
      TransferMove: 移动
      TransferSoftLink: 软链接
      TransferUnknown: 未知传输类型
    x-enum-descriptions:
    - 未知传输类型
    - 复制
    - 移动
    - 硬链接
    - 软链接
    x-enum-varnames:
    - TransferUnknown
    - TransferCopy
    - TransferMove
    - TransferLink
    - TransferSoftLink
info:
  contact: {}
  description: 下一代媒体刮削&整理工具
  title: MediaTools API 文档
  version: "1.0"
paths:
  /config/fanart:
    get:
      description: 获取 Fanart 配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.FanartConfig'
      summary: 获取 Fanart 配置
      tags:
      - 应用配置
      - Fanart
    post:
      consumes:
      - application/json
      description: 更新 Fanart 配置
      parameters:
      - description: Fanart 配置
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/config.FanartConfig'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.FanartConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新 Fanart 配置
      tags:
      - 应用配置
      - Fanart
  /config/libraries:
    get:
      description: 获取媒体库配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/config.LibraryConfig'
            type: array
      summary: 获取媒体库配置
      tags:
      - 应用配置
    post:
      consumes:
      - application/json
      description: 更新媒体库配置
      parameters:
      - description: 媒体库配置
        in: body
        name: config
        required: true
        schema:
          items:
            $ref: '#/definitions/config.LibraryConfig'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/config.LibraryConfig'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新媒体库配置
      tags:
      - 应用配置
  /config/log:
    get:
      description: 获取日志配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.LogConfig'
      summary: 获取日志配置
      tags:
      - 应用配置
      - 日志
    post:
      consumes:
      - application/json
      description: 更新日志配置
      parameters:
      - description: 日志配置
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/config.LogConfig'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.LogConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新日志配置
      tags:
      - 应用配置
      - 日志
  /config/media/custom_word:
    get:
      consumes:
      - application/json
      description: 获取自定义词配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.CustomWordConfig'
      summary: 获取自定义词配置
      tags:
      - 应用配置
    post:
      consumes:
      - application/json
      description: 更新自定义词配置
      parameters:
      - description: 自定义词配置
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/config.CustomWordConfig'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.CustomWordConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新自定义词配置
      tags:
      - 应用配置
  /config/media/format:
    get:
      description: 获取媒体格式配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.FormatConfig'
      summary: 获取媒体格式配置
      tags:
      - 应用配置
    post:
      consumes:
      - application/json
      description: 更新媒体格式配置
      parameters:
      - description: 媒体格式配置
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/config.FormatConfig'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.FormatConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新媒体格式配置
      tags:
      - 应用配置
  /config/tmdb:
    get:
      description: 获取 TMDB 配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.TMDBConfig'
      summary: 获取 TMDB 配置
      tags:
      - 应用配置
      - TMDB
    post:
      consumes:
      - application/json
      description: 更新 TMDB 配置
      parameters:
      - description: TMDB 配置
        in: body
        name: config
        required: true
        schema:
          $ref: '#/definitions/config.TMDBConfig'
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/config.TMDBConfig'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 更新 TMDB 配置
      tags:
      - 应用配置
      - TMDB
  /library/archive:
    post:
      consumes:
      - application/json
      description: 整理一个视频文件及其相关的字幕和音轨文件到指定目录
      parameters:
      - description: 请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/schemas.LibraryArchiveMediaRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应
          schema:
            $ref: '#/definitions/schemas.FileInfo'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 归档媒体文件
      tags:
      - 媒体库
  /log/recent:
    get:
      description: 获取最近日志
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/loghook.LogDetail'
            type: array
      summary: 获取最近日志
      tags:
      - 日志
  /overview/{media_type}/{tmdb_id}:
    get:
      description: 根据媒体类型和 TMDB ID 获取对应的概述信息
      parameters:
      - description: 媒体类型
        enum:
        - Movie
        - TV
        in: path
        name: media_type
        required: true
        type: string
      - description: TMDB ID
        in: path
        name: tmdb_id
        required: true
        type: integer
      - description: 季数
        in: query
        name: season
        type: integer
      - description: 集数
        in: query
        name: episode
        type: integer
      responses:
        "200":
          description: 成功响应，返回概述信息
          schema:
            type: string
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "404":
          description: 未找到概述信息
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 获取媒体概述信息
      tags:
      - TMDB
  /poster/{media_type}/{tmdb_id}:
    get:
      description: 根据媒体类型和 TMDB ID 获取对应的海报图片 URL
      parameters:
      - description: 媒体类型
        enum:
        - Movie
        - TV
        in: path
        name: media_type
        required: true
        type: string
      - description: TMDB ID
        in: path
        name: tmdb_id
        required: true
        type: integer
      responses:
        "200":
          description: 成功响应，返回图片 URL
          schema:
            type: string
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: 服务器错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 获取媒体海报图片
      tags:
      - TMDB
  /scrape/video:
    post:
      consumes:
      - application/json
      description: 刮削视频文件的元数据和相关信息
      parameters:
      - description: 刮削请求参数
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/schemas.ScrapeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 刮削成功
          schema:
            $ref: '#/definitions/schemas.FileInfo'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
        "500":
          description: 刮削失败
          schema:
            $ref: '#/definitions/schemas.ErrResponse'
      summary: 刮削视频
      tags:
      - 刮削
schemes:
- HTTP
swagger: "2.0"
